<div class="auth-bg">
  <div class="auth-card">

    <!-- Icono superior -->
    <div class="auth-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"
           fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
        <polyline points="10 17 15 12 10 7"/>
        <line x1="15" y1="12" x2="3" y2="12"/>
      </svg>
    </div>

    <h1 class="auth-title">Bienvenido</h1>
    <p class="auth-subtitle">Inicia sesión en tu cuenta wellness</p>

    <!-- Error global -->
    @if (errorMsg()) {
      <div class="error-banner">{{ errorMsg() }}</div>
    }

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

      <!-- Correo -->
      <div class="field">
        <label>Correo Electrónico</label>
        <div class="input-wrap" [class.invalid]="email?.invalid && email?.touched">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="4" width="20" height="16" rx="2"/>
            <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
          </svg>
          <input type="email" formControlName="correo_electronico" placeholder="tu@email.com" autocomplete="email"/>
        </div>
        @if (email?.invalid && email?.touched) {
          <span class="field-error">
            @if (email?.errors?.['required']) { El correo es obligatorio }
            @if (email?.errors?.['email']) { Ingresa un correo válido }
          </span>
        }
      </div>

      <!-- Contraseña -->
      <div class="field">
        <label>Contraseña</label>
        <div class="input-wrap" [class.invalid]="password?.invalid && password?.touched">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <input [type]="showPassword() ? 'text' : 'password'"
                 formControlName="contrasena"
                 placeholder="••••••••"
                 autocomplete="current-password"/>
          <button type="button" class="toggle-pass" (click)="togglePassword()">
            @if (showPassword()) {
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            } @else {
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            }
          </button>
        </div>
        @if (password?.invalid && password?.touched) {
          <span class="field-error">
            @if (password?.errors?.['required']) { La contraseña es obligatoria }
            @if (password?.errors?.['minlength']) { Mínimo 8 caracteres }
          </span>
        }
      </div>

      <!-- Botón -->
      <button type="submit" class="btn-primary" [disabled]="loading()">
        @if (loading()) {
          <span class="spinner"></span> Iniciando...
        } @else {
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="white" stroke-width="2.5">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
            <polyline points="10 17 15 12 10 7"/>
            <line x1="15" y1="12" x2="3" y2="12"/>
          </svg>
          Iniciar Sesión
        }
      </button>

    </form>

    <!-- Footer -->
    <p class="auth-footer">
      ¿No tienes una cuenta?
      <a routerLink="/auth/register" class="link-register">Regístrate aquí</a>
    </p>

  </div>
</div>