<nav class="navbar">
  <div class="nav-inner">

    <!-- Logo -->
    <a routerLink="/dashboard" class="nav-logo">
      <div class="logo-icon">W</div>
      <span>Wellness</span>
    </a>

    <!-- Links -->
    <ul class="nav-links">
      @for (link of navLinks; track link.path) {
        <li>
          <a [routerLink]="link.path"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{ exact: link.path === '/dashboard' }">
            {{ link.label }}
          </a>
        </li>
      }
    </ul>

    <!-- Acciones -->
    <div class="nav-actions">

      <!-- Buscar -->
      <button class="icon-btn" title="Buscar">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
      </button>

      <!-- Notificaciones -->
      <button class="icon-btn badge-btn" title="Notificaciones">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
        <span class="badge">2</span>
      </button>

      <!-- Carrito -->
      <button class="icon-btn badge-btn" title="Carrito">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
        <span class="badge badge-orange">4</span>
      </button>

      <!-- Usuario -->
      <div class="user-menu">
        <button class="avatar-btn" (click)="toggleDropdown()" [class.open]="dropdownOpen()">
          <div class="avatar">{{ getInitials() }}</div>
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2.5"
               [style.transform]="dropdownOpen() ? 'rotate(180deg)' : 'rotate(0)'"
               style="transition: transform 0.2s">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>

        @if (dropdownOpen()) {
          <div class="dropdown">
            <div class="dropdown-header">
              <strong>{{ usuario?.nombre_completo }}</strong>
              <span>{{ usuario?.correo_electronico }}</span>
            </div>
            <hr/>
            <a routerLink="/dashboard/perfil" class="dropdown-item" (click)="dropdownOpen.set(false)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              Mi Perfil
            </a>
            <a routerLink="/dashboard/reservas" class="dropdown-item" (click)="dropdownOpen.set(false)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              Mis Reservas
            </a>
            <a routerLink="/dashboard/historial" class="dropdown-item" (click)="dropdownOpen.set(false)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              Historial de Compras
            </a>
            <hr/>
            <button class="dropdown-item logout" (click)="logout()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16 17 21 12 16 7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
              </svg>
              Cerrar Sesi√≥n
            </button>
          </div>
        }
      </div>

    </div>
  </div>
</nav>