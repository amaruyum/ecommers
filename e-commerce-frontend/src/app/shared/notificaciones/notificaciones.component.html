<div class="notif-wrap">

  <!-- Campana -->
  <button class="bell-btn" (click)="toggle()" [class.active]="open()" title="Notificaciones">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
         fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
    </svg>
    @if (sinLeer() > 0) {
      <span class="bell-badge">{{ sinLeer() }}</span>
    }
  </button>

  <!-- Dropdown -->
  @if (open()) {
    <div class="dropdown">

      <!-- Header -->
      <div class="dropdown-header">
        <span class="header-title">Notificaciones</span>
        @if (sinLeer() > 0) {
          <button class="mark-all" (click)="marcarTodasLeidas()">
            Marcar todas como leÃ­das
          </button>
        }
      </div>

      <!-- Lista -->
      <ul class="notif-list">
        @for (n of notificaciones(); track n.id) {
          <li class="notif-item" [class.unread]="!n.leida" (click)="marcarLeida(n.id)">
            <div class="notif-icono">{{ getIcono(n.tipo) }}</div>
            <div class="notif-body">
              <div class="notif-top">
                <span class="notif-titulo">{{ n.titulo }}</span>
                @if (!n.leida) { <span class="dot"></span> }
              </div>
              <p class="notif-mensaje">{{ n.mensaje }}</p>
              <span class="notif-tiempo">{{ n.tiempo }}</span>
            </div>
          </li>
        } @empty {
          <li class="empty">
            <span>ðŸŽ‰</span>
            <p>Todo al dÃ­a, sin notificaciones nuevas</p>
          </li>
        }
      </ul>

    </div>
  }

</div>